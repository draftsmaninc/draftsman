"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{1772:(e,t,n)=>{n.r(t),n.d(t,{Background:()=>t2,BackgroundVariant:()=>o,BaseEdge:()=>eK,BezierEdge:()=>e8,ConnectionLineType:()=>a.Do,ConnectionMode:()=>a.WZ,ControlButton:()=>t8,Controls:()=>nt,EdgeLabelRenderer:()=>tj,EdgeText:()=>eW,Handle:()=>eN,MarkerType:()=>a.TG,MiniMap:()=>nc,NodeResizeControl:()=>nu,NodeResizer:()=>ng,NodeToolbar:()=>ny,PanOnScrollMode:()=>a.ny,Panel:()=>E,Position:()=>a.yX,ReactFlow:()=>tP,ReactFlowProvider:()=>tN,ResizeControlVariant:()=>a.xN,SelectionMode:()=>a.Qc,SimpleBezierEdge:()=>eq,SmoothStepEdge:()=>eJ,StepEdge:()=>e2,StraightEdge:()=>e5,ViewportPortal:()=>t_,addEdge:()=>a.rN,applyEdgeChanges:()=>K,applyNodeChanges:()=>W,getBezierEdgeCenter:()=>a.e_,getBezierPath:()=>a.Fp,getConnectedEdges:()=>a.AX,getEdgeCenter:()=>a.DC,getIncomers:()=>a.FB,getNodesBounds:()=>a.Jo,getOutgoers:()=>a.RM,getSimpleBezierPath:()=>eQ,getSmoothStepPath:()=>a.oN,getStraightPath:()=>a.ah,getViewportForBounds:()=>a.R4,isEdge:()=>$,isNode:()=>G,reconnectEdge:()=>a.p1,useConnection:()=>th,useEdges:()=>tB,useEdgesState:()=>tF,useHandleConnections:()=>tK,useInternalNode:()=>tq,useKeyPress:()=>H,useNodeConnections:()=>tQ,useNodeId:()=>eS,useNodes:()=>tz,useNodesData:()=>tU,useNodesInitialized:()=>tW,useNodesState:()=>tH,useOnSelectionChange:()=>tT,useOnViewportChange:()=>tZ,useReactFlow:()=>er,useStore:()=>p,useStoreApi:()=>h,useUpdateNodeInternals:()=>tD,useViewport:()=>tV});var o,l=n(5155),r=n(2115),i=n(5694),a=n(9476),s=n(4741),d=n(5745),c=n(7650);let u=(0,r.createContext)(null),g=u.Provider,f=a.xc.error001();function p(e,t){let n=(0,r.useContext)(u);if(null===n)throw Error(f);return(0,s.n)(n,e,t)}function h(){let e=(0,r.useContext)(u);if(null===e)throw Error(f);return(0,r.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}let m={display:"none"},v={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},y="react-flow__node-desc",x="react-flow__edge-desc",w=e=>e.ariaLiveMessage;function b(e){let{rfId:t}=e,n=p(w);return(0,l.jsx)("div",{id:"".concat("react-flow__aria-live","-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:v,children:n})}function S(e){let{rfId:t,disableKeyboardA11y:n}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{id:"".concat(y,"-").concat(t),style:m,children:["Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,l.jsx)("div",{id:"".concat(x,"-").concat(t),style:m,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!n&&(0,l.jsx)(b,{rfId:t})]})}let C=e=>e.userSelectionActive?"none":"all",E=(0,r.forwardRef)((e,t)=>{let{position:n="top-left",children:o,className:r,style:a,...s}=e,d=p(C),c="".concat(n).split("-");return(0,l.jsx)("div",{className:(0,i.A)(["react-flow__panel",r,...c]),style:{...a,pointerEvents:d},ref:t,...s,children:o})});function N(e){let{proOptions:t,position:n="bottom-right"}=e;return(null==t?void 0:t.hideAttribution)?null:(0,l.jsx)(E,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,l.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}E.displayName="Panel";let k=e=>{let t=[],n=[];for(let[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(let[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},M=e=>e.id;function P(e,t){return(0,d.x)(e.selectedNodes.map(M),t.selectedNodes.map(M))&&(0,d.x)(e.selectedEdges.map(M),t.selectedEdges.map(M))}function A(e){let{onSelectionChange:t}=e,n=h(),{selectedNodes:o,selectedEdges:l}=p(k,P);return(0,r.useEffect)(()=>{let e={nodes:o,edges:l};null==t||t(e),n.getState().onSelectionChangeHandlers.forEach(t=>t(e))},[o,l,t]),null}let j=e=>!!e.onSelectionChangeHandlers;function R(e){let{onSelectionChange:t}=e,n=p(j);return t||n?(0,l.jsx)(A,{onSelectionChange:t}):null}let _=[0,0],D={x:0,y:0,zoom:1},I=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],z=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),O={translateExtent:a.ZO,nodeOrigin:_,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function B(e){let{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:l,setTranslateExtent:i,setNodeExtent:a,reset:s,setDefaultNodesAndEdges:c,setPaneClickDistance:u}=p(z,d.x),g=h();(0,r.useEffect)(()=>(c(e.defaultNodes,e.defaultEdges),()=>{f.current=O,s()}),[]);let f=(0,r.useRef)(O);return(0,r.useEffect)(()=>{for(let r of I){let s=e[r];s!==f.current[r]&&void 0!==e[r]&&("nodes"===r?t(s):"edges"===r?n(s):"minZoom"===r?o(s):"maxZoom"===r?l(s):"translateExtent"===r?i(s):"nodeExtent"===r?a(s):"paneClickDistance"===r?u(s):"fitView"===r?g.setState({fitViewQueued:s}):"fitViewOptions"===r?g.setState({fitViewOptions:s}):g.setState({[r]:s}))}f.current=e},I.map(t=>e[t])),null}function L(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}let V="undefined"!=typeof document?document:null;function H(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{target:V,actInsideInputWithModifier:!0},[n,o]=(0,r.useState)(!1),l=(0,r.useRef)(!1),i=(0,r.useRef)(new Set([])),[s,d]=(0,r.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,r.useEffect)(()=>{var n,r;let c=null!=(n=null==t?void 0:t.target)?n:V,u=null==(r=null==t?void 0:t.actInsideInputWithModifier)||r;if(null!==e){let e=e=>{if(l.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey,(!l.current||l.current&&!u)&&(0,a.v5)(e))return!1;let n=Z(e.code,d);if(i.current.add(e[n]),F(s,i.current,!1)){var r,c;let n=(null==(c=e.composedPath)||null==(r=c.call(e))?void 0:r[0])||e.target,i=(null==n?void 0:n.nodeName)==="BUTTON"||(null==n?void 0:n.nodeName)==="A";!1!==t.preventDefault&&(l.current||!i)&&e.preventDefault(),o(!0)}},n=e=>{let t=Z(e.code,d);F(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(e[t]),"Meta"===e.key&&i.current.clear(),l.current=!1},r=()=>{i.current.clear(),o(!1)};return null==c||c.addEventListener("keydown",e),null==c||c.addEventListener("keyup",n),window.addEventListener("blur",r),window.addEventListener("contextmenu",r),()=>{null==c||c.removeEventListener("keydown",e),null==c||c.removeEventListener("keyup",n),window.removeEventListener("blur",r),window.removeEventListener("contextmenu",r)}}},[e,o]),n}function F(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function Z(e,t){return t.includes(e)?"code":"key"}let T=()=>{let e=h();return(0,r.useMemo)(()=>({zoomIn:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:null==t?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:null==t?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{let{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:null==n?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{var o,l,r;let{transform:[i,a,s],panZoom:d}=e.getState();return d?(await d.setViewport({x:null!=(o=t.x)?o:i,y:null!=(l=t.y)?l:a,zoom:null!=(r=t.zoom)?r:s},{duration:null==n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>{let{width:l,height:r,maxZoom:i,panZoom:a}=e.getState(),s=void 0!==(null==o?void 0:o.zoom)?o.zoom:i;return a?(await a.setViewport({x:l/2-t*s,y:r/2-n*s,zoom:s},{duration:null==o?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{var o;let{width:l,height:r,minZoom:i,maxZoom:s,panZoom:d}=e.getState(),c=(0,a.R4)(t,l,r,i,s,null!=(o=null==n?void 0:n.padding)?o:.1);return d?(await d.setViewport(c,{duration:null==n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:function(t){var n,o;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{transform:r,snapGrid:i,snapToGrid:s,domNode:d}=e.getState();if(!d)return t;let{x:c,y:u}=d.getBoundingClientRect(),g={x:t.x-c,y:t.y-u},f=null!=(n=l.snapGrid)?n:i,p=null!=(o=l.snapToGrid)?o:s;return(0,a.Ff)(g,r,p,f)},flowToScreenPosition:t=>{let{transform:n,domNode:o}=e.getState();if(!o)return t;let{x:l,y:r}=o.getBoundingClientRect(),i=(0,a.zj)(t,n);return{x:i.x+l,y:i.y+r}}}),[])};function X(e,t){let n=[],o=new Map,l=[];for(let t of e)if("add"===t.type){l.push(t);continue}else if("remove"===t.type||"replace"===t.type)o.set(t.id,[t]);else{let e=o.get(t.id);e?e.push(t):o.set(t.id,[t])}for(let e of t){let t=o.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}let l={...e};for(let e of t){var r,i=e,a=l;switch(i.type){case"select":a.selected=i.selected;break;case"position":void 0!==i.position&&(a.position=i.position),void 0!==i.dragging&&(a.dragging=i.dragging);break;case"dimensions":if(void 0!==i.dimensions){null!=a.measured||(a.measured={}),a.measured.width=i.dimensions.width,a.measured.height=i.dimensions.height,i.setAttributes&&((!0===i.setAttributes||"width"===i.setAttributes)&&(a.width=i.dimensions.width),(!0===i.setAttributes||"height"===i.setAttributes)&&(a.height=i.dimensions.height))}"boolean"==typeof i.resizing&&(a.resizing=i.resizing)}}n.push(l)}return l.length&&l.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function W(e,t){return X(e,t)}function K(e,t){return X(e,t)}function Y(e,t){return{id:e,type:"select",selected:t}}function Q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[];for(let[l,r]of e){let e=t.has(l);(void 0!==r.selected||e)&&r.selected!==e&&(n&&(r.selected=e),o.push(Y(r.id,e)))}return o}function U(e){let{items:t=[],lookup:n}=e,o=[],l=new Map(t.map(e=>[e.id,e]));for(let[e,l]of t.entries()){var r,i;let t=n.get(l.id),a=null!=(i=null==t||null==(r=t.internals)?void 0:r.userNode)?i:t;void 0!==a&&a!==l&&o.push({id:l.id,item:l,type:"replace"}),void 0===a&&o.push({item:l,type:"add",index:e})}for(let[e]of n)void 0===l.get(e)&&o.push({id:e,type:"remove"});return o}function q(e){return{id:e.id,type:"remove"}}let G=e=>(0,a.oB)(e),$=e=>(0,a.b$)(e);function J(e){return(0,r.forwardRef)(e)}let ee="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function et(e){let[t,n]=(0,r.useState)(BigInt(0)),[o]=(0,r.useState)(()=>{var e;let t;return e=()=>n(e=>e+BigInt(1)),t=[],{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}});return ee(()=>{let t=o.get();t.length&&(e(t),o.reset())},[t]),o}let en=(0,r.createContext)(null);function eo(e){let{children:t}=e,n=h(),o=et((0,r.useCallback)(e=>{let{nodes:t=[],setNodes:o,hasDefaultNodes:l,onNodesChange:r,nodeLookup:i,fitViewQueued:a}=n.getState(),s=t;for(let t of e)s="function"==typeof t?t(s):t;let d=U({items:s,lookup:i});l&&o(s),d.length>0?null==r||r(d):a&&window.requestAnimationFrame(()=>{let{fitViewQueued:e,nodes:t,setNodes:o}=n.getState();e&&o(t)})},[])),i=et((0,r.useCallback)(e=>{let{edges:t=[],setEdges:o,hasDefaultEdges:l,onEdgesChange:r,edgeLookup:i}=n.getState(),a=t;for(let t of e)a="function"==typeof t?t(a):t;l?o(a):r&&r(U({items:a,lookup:i}))},[])),a=(0,r.useMemo)(()=>({nodeQueue:o,edgeQueue:i}),[]);return(0,l.jsx)(en.Provider,{value:a,children:t})}let el=e=>!!e.panZoom;function er(){let e=T(),t=h(),n=function(){let e=(0,r.useContext)(en);if(!e)throw Error("useBatchContext must be used within a BatchProvider");return e}(),o=p(el),l=(0,r.useMemo)(()=>{let e=e=>t.getState().nodeLookup.get(e),o=e=>{n.nodeQueue.push(e)},l=e=>{n.edgeQueue.push(e)},r=e=>{var n,o,l,r;let{nodeLookup:i,nodeOrigin:s}=t.getState(),d=G(e)?e:i.get(e.id),c=d.parentId?(0,a.us)(d.position,d.measured,d.parentId,i,s):d.position,u={...d,position:c,width:null!=(l=null==(n=d.measured)?void 0:n.width)?l:d.width,height:null!=(r=null==(o=d.measured)?void 0:o.height)?r:d.height};return(0,a.kM)(u)},i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};o(o=>o.map(o=>{if(o.id===e){let e="function"==typeof t?t(o):t;return n.replace&&G(e)?e:{...o,...e}}return o}))},s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};l(o=>o.map(o=>{if(o.id===e){let e="function"==typeof t?t(o):t;return n.replace&&$(e)?e:{...o,...e}}return o}))};return{getNodes:()=>t.getState().nodes.map(e=>({...e})),getNode:t=>{var n;return null==(n=e(t))?void 0:n.internals.userNode},getInternalNode:e,getEdges:()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:o,setEdges:l,addNodes:e=>{let t=Array.isArray(e)?e:[e];n.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{let t=Array.isArray(e)?e:[e];n.edgeQueue.push(e=>[...e,...t])},toObject:()=>{let{nodes:e=[],edges:n=[],transform:o}=t.getState(),[l,r,i]=o;return{nodes:e.map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:l,y:r,zoom:i}}},deleteElements:async e=>{let{nodes:n=[],edges:o=[]}=e,{nodes:l,edges:r,onNodesDelete:i,onEdgesDelete:s,triggerNodeChanges:d,triggerEdgeChanges:c,onDelete:u,onBeforeDelete:g}=t.getState(),{nodes:f,edges:p}=await (0,a.Tq)({nodesToRemove:n,edgesToRemove:o,nodes:l,edges:r,onBeforeDelete:g}),h=p.length>0,m=f.length>0;if(h){let e=p.map(q);null==s||s(p),c(e)}if(m){let e=f.map(q);null==i||i(f),d(e)}return(m||h)&&(null==u||u({nodes:f,edges:p})),{deletedNodes:f,deletedEdges:p}},getIntersectingNodes:function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=arguments.length>2?arguments[2]:void 0,l=(0,a.mW)(e),i=l?e:r(e),s=void 0!==o;return i?(o||t.getState().nodes).filter(o=>{let r=t.getState().nodeLookup.get(o.id);if(r&&!l&&(o.id===e.id||!r.internals.positionAbsolute))return!1;let d=(0,a.kM)(s?o:r),c=(0,a.X6)(d,i);return n&&c>0||c>=i.width*i.height}):[]},isNodeIntersecting:function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=(0,a.mW)(e)?e:r(e);if(!o)return!1;let l=(0,a.X6)(o,t);return n&&l>0||l>=o.width*o.height},updateNode:i,updateNodeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};i(e,e=>{let o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}},n)},updateEdge:s,updateEdgeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};s(e,e=>{let o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}},n)},getNodesBounds:e=>{let{nodeLookup:n,nodeOrigin:o}=t.getState();return(0,a.Jo)(e,{nodeLookup:n,nodeOrigin:o})},getHandleConnections:e=>{var n,o;let{type:l,id:r,nodeId:i}=e;return Array.from(null!=(o=null==(n=t.getState().connectionLookup.get("".concat(i,"-").concat(l).concat(r?"-".concat(r):"")))?void 0:n.values())?o:[])},getNodeConnections:e=>{var n,o;let{type:l,handleId:r,nodeId:i}=e;return Array.from(null!=(o=null==(n=t.getState().connectionLookup.get("".concat(i).concat(l?r?"-".concat(l,"-").concat(r):"-".concat(l):"")))?void 0:n.values())?o:[])},fitView:async e=>{var o;let l=null!=(o=t.getState().fitViewResolver)?o:(0,a.YN)();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:l}),n.nodeQueue.push(e=>[...e]),l.promise}}},[]);return(0,r.useMemo)(()=>({...l,...e,viewportInitialized:o}),[o])}let ei=e=>e.selected,ea="undefined"!=typeof window?window:void 0,es={position:"absolute",width:"100%",height:"100%",top:0,left:0},ed=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function ec(e){let{onPaneContextMenu:t,zoomOnScroll:n=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:s=.5,panOnScrollMode:c=a.ny.Free,zoomOnDoubleClick:u=!0,panOnDrag:g=!0,defaultViewport:f,translateExtent:m,minZoom:v,maxZoom:y,zoomActivationKeyCode:x,preventScrolling:w=!0,children:b,noWheelClassName:S,noPanClassName:C,onViewportChange:E,isControlledViewport:N,paneClickDistance:k}=e,M=h(),P=(0,r.useRef)(null),{userSelectionActive:A,lib:j}=p(ed,d.x),R=H(x),_=(0,r.useRef)(),D=h();(0,r.useEffect)(()=>{let e=()=>{if(!P.current)return!1;let e=(0,a.Eo)(P.current);if(0===e.height||0===e.width){var t,n;null==(t=(n=D.getState()).onError)||t.call(n,"004",a.xc.error004())}D.setState({width:e.width||500,height:e.height||500})};if(P.current){e(),window.addEventListener("resize",e);let t=new ResizeObserver(()=>e());return t.observe(P.current),()=>{window.removeEventListener("resize",e),t&&P.current&&t.unobserve(P.current)}}},[]);let I=(0,r.useCallback)(e=>{null==E||E({x:e[0],y:e[1],zoom:e[2]}),N||M.setState({transform:e})},[E,N]);return(0,r.useEffect)(()=>{if(P.current){_.current=(0,a.kO)({domNode:P.current,minZoom:v,maxZoom:y,translateExtent:m,viewport:f,paneClickDistance:k,onDraggingChange:e=>M.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{let{onViewportChangeStart:n,onMoveStart:o}=M.getState();null==o||o(e,t),null==n||n(t)},onPanZoom:(e,t)=>{let{onViewportChange:n,onMove:o}=M.getState();null==o||o(e,t),null==n||n(t)},onPanZoomEnd:(e,t)=>{let{onViewportChangeEnd:n,onMoveEnd:o}=M.getState();null==o||o(e,t),null==n||n(t)}});let{x:e,y:t,zoom:n}=_.current.getViewport();return M.setState({panZoom:_.current,transform:[e,t,n],domNode:P.current.closest(".react-flow")}),()=>{var e;null==(e=_.current)||e.destroy()}}},[]),(0,r.useEffect)(()=>{var e;null==(e=_.current)||e.update({onPaneContextMenu:t,zoomOnScroll:n,zoomOnPinch:o,panOnScroll:i,panOnScrollSpeed:s,panOnScrollMode:c,zoomOnDoubleClick:u,panOnDrag:g,zoomActivationKeyPressed:R,preventScrolling:w,noPanClassName:C,userSelectionActive:A,noWheelClassName:S,lib:j,onTransformChange:I})},[t,n,o,i,s,c,u,g,R,w,C,A,S,j,I]),(0,l.jsx)("div",{className:"react-flow__renderer",ref:P,style:es,children:b})}let eu=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function eg(){let{userSelectionActive:e,userSelectionRect:t}=p(eu,d.x);return e&&t?(0,l.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}let ef=(e,t)=>n=>{n.target===t.current&&(null==e||e(n))},ep=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function eh(e){let{isSelecting:t,selectionKeyPressed:n,selectionMode:o=a.Qc.Full,panOnDrag:s,selectionOnDrag:c,onSelectionStart:u,onSelectionEnd:g,onPaneClick:f,onPaneContextMenu:m,onPaneScroll:v,onPaneMouseEnter:y,onPaneMouseMove:x,onPaneMouseLeave:w,children:b}=e,S=h(),{userSelectionActive:C,elementsSelectable:E,dragging:N,connectionInProgress:k}=p(ep,d.x),M=E&&(t||C),P=(0,r.useRef)(null),A=(0,r.useRef)(),j=(0,r.useRef)(new Set),R=(0,r.useRef)(new Set),_=(0,r.useRef)(!1),D=(0,r.useRef)(!1),I=e=>{if(_.current||k){_.current=!1;return}null==f||f(e),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},z=!0===s||Array.isArray(s)&&s.includes(0);return(0,l.jsxs)("div",{className:(0,i.A)(["react-flow__pane",{draggable:z,dragging:N,selection:t}]),onClick:M?void 0:ef(I,P),onContextMenu:ef(e=>{if(Array.isArray(s)&&(null==s?void 0:s.includes(2)))return void e.preventDefault();null==m||m(e)},P),onWheel:ef(v?e=>v(e):void 0,P),onPointerEnter:M?void 0:y,onPointerDown:M?e=>{var n,o;let{resetSelectedElements:l,domNode:r}=S.getState();if(A.current=null==r?void 0:r.getBoundingClientRect(),!E||!t||0!==e.button||e.target!==P.current||!A.current)return;null==(o=e.target)||null==(n=o.setPointerCapture)||n.call(o,e.pointerId),D.current=!0,_.current=!1;let{x:i,y:s}=(0,a.q1)(e.nativeEvent,A.current);l(),S.setState({userSelectionRect:{width:0,height:0,startX:i,startY:s,x:i,y:s}}),null==u||u(e)}:x,onPointerMove:M?e=>{var t,n;let{userSelectionRect:l,transform:r,nodeLookup:i,edgeLookup:s,connectionLookup:d,triggerNodeChanges:c,triggerEdgeChanges:u,defaultEdgeOptions:g}=S.getState();if(!A.current||!l)return;_.current=!0;let{x:f,y:p}=(0,a.q1)(e.nativeEvent,A.current),{startX:h,startY:m}=l,v={startX:h,startY:m,x:f<h?f:h,y:p<m?p:m,width:Math.abs(f-h),height:Math.abs(p-m)},y=j.current,x=R.current;j.current=new Set((0,a.U$)(i,v,r,o===a.Qc.Partial,!0).map(e=>e.id)),R.current=new Set;let w=null==(t=null==g?void 0:g.selectable)||t;for(let e of j.current){let t=d.get(e);if(t)for(let{edgeId:e}of t.values()){let t=s.get(e);t&&(null!=(n=t.selectable)?n:w)&&R.current.add(e)}}(0,a._s)(y,j.current)||c(Q(i,j.current,!0)),(0,a._s)(x,R.current)||u(Q(s,R.current)),S.setState({userSelectionRect:v,userSelectionActive:!0,nodesSelectionActive:!1})}:x,onPointerUp:M?e=>{var t,o;if(0!==e.button||!D.current)return;null==(o=e.target)||null==(t=o.releasePointerCapture)||t.call(o,e.pointerId);let{userSelectionRect:l}=S.getState();!C&&l&&e.target===P.current&&(null==I||I(e)),S.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:j.current.size>0}),null==g||g(e),(n||c)&&(_.current=!1),D.current=!1}:void 0,onPointerLeave:w,ref:P,style:es,children:[b,(0,l.jsx)(eg,{})]})}function em(e){let{id:t,store:n,unselect:o=!1,nodeRef:l}=e,{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:d,onError:c}=n.getState(),u=d.get(t);if(!u){null==c||c("012",a.xc.error012(t));return}n.setState({nodesSelectionActive:!1}),u.selected?(o||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var e;return null==l||null==(e=l.current)?void 0:e.blur()})):r([t])}function ev(e){let{nodeRef:t,disabled:n=!1,noDragClassName:o,handleSelector:l,nodeId:i,isSelectable:s,nodeClickDistance:d}=e,c=h(),[u,g]=(0,r.useState)(!1),f=(0,r.useRef)();return(0,r.useEffect)(()=>{f.current=(0,a.I$)({getStoreItems:()=>c.getState(),onNodeMouseDown:e=>{em({id:e,store:c,nodeRef:t})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),(0,r.useEffect)(()=>{var e,r;if(n)null==(e=f.current)||e.destroy();else if(t.current)return null==(r=f.current)||r.update({noDragClassName:o,handleSelector:l,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:d}),()=>{var e;null==(e=f.current)||e.destroy()}},[o,l,n,s,t,i]),u}let ey=e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable);function ex(){let e=h();return(0,r.useCallback)(t=>{let{nodeExtent:n,snapToGrid:o,snapGrid:l,nodesDraggable:r,onError:i,updateNodePositions:s,nodeLookup:d,nodeOrigin:c}=e.getState(),u=new Map,g=ey(r),f=o?l[0]:5,p=o?l[1]:5,h=t.direction.x*f*t.factor,m=t.direction.y*p*t.factor;for(let[,e]of d){if(!g(e))continue;let t={x:e.internals.positionAbsolute.x+h,y:e.internals.positionAbsolute.y+m};o&&(t=(0,a.s_)(t,l));let{position:r,positionAbsolute:s}=(0,a.aE)({nodeId:e.id,nextPosition:t,nodeLookup:d,nodeExtent:n,nodeOrigin:c,onError:i});e.position=r,e.internals.positionAbsolute=s,u.set(e.id,e)}s(u)},[])}let ew=(0,r.createContext)(null),eb=ew.Provider;ew.Consumer;let eS=()=>(0,r.useContext)(ew),eC=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),eE=(e,t,n)=>o=>{let{connectionClickStartHandle:l,connectionMode:r,connection:i}=o,{fromHandle:s,toHandle:d,isValid:c}=i,u=(null==d?void 0:d.nodeId)===e&&(null==d?void 0:d.id)===t&&(null==d?void 0:d.type)===n;return{connectingFrom:(null==s?void 0:s.nodeId)===e&&(null==s?void 0:s.id)===t&&(null==s?void 0:s.type)===n,connectingTo:u,clickConnecting:(null==l?void 0:l.nodeId)===e&&(null==l?void 0:l.id)===t&&(null==l?void 0:l.type)===n,isPossibleEndHandle:r===a.WZ.Strict?(null==s?void 0:s.type)!==n:e!==(null==s?void 0:s.nodeId)||t!==(null==s?void 0:s.id),connectionInProcess:!!s,clickConnectionInProcess:!!l,valid:u&&c}},eN=(0,r.memo)(J(function(e,t){let{type:n="source",position:o=a.yX.Top,isValidConnection:r,isConnectable:s=!0,isConnectableStart:c=!0,isConnectableEnd:u=!0,id:g,onConnect:f,children:m,className:v,onMouseDown:y,onTouchStart:x,...w}=e,b=g||null,S="target"===n,C=h(),E=eS(),{connectOnClick:N,noPanClassName:k,rfId:M}=p(eC,d.x),{connectingFrom:P,connectingTo:A,clickConnecting:j,isPossibleEndHandle:R,connectionInProcess:_,clickConnectionInProcess:D,valid:I}=p(eE(E,b,n),d.x);if(!E){var z,O;null==(z=(O=C.getState()).onError)||z.call(O,"010",a.xc.error010())}let B=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=C.getState(),l={...t,...e};if(o){let{edges:e,setEdges:t}=C.getState();t((0,a.rN)(l,e))}null==n||n(l),null==f||f(l)},L=e=>{if(!E)return;let t=(0,a.Er)(e.nativeEvent);if(c&&(t&&0===e.button||!t)){let t=C.getState();a.aQ.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:S,handleId:b,nodeId:E,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:B,isValidConnection:r||t.isValidConnection,getTransform:()=>C.getState().transform,getFromHandle:()=>C.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?null==y||y(e):null==x||x(e)};return(0,l.jsx)("div",{"data-handleid":b,"data-nodeid":E,"data-handlepos":o,"data-id":"".concat(M,"-").concat(E,"-").concat(b,"-").concat(n),className:(0,i.A)(["react-flow__handle","react-flow__handle-".concat(o),"nodrag",k,v,{source:!S,target:S,connectable:s,connectablestart:c,connectableend:u,clickconnecting:j,connectingfrom:P,connectingto:A,valid:I,connectionindicator:s&&(!_||R)&&(_||D?u:c)}]),onMouseDown:L,onTouchStart:L,onClick:N?e=>{let{onClickConnectStart:t,onClickConnectEnd:o,connectionClickStartHandle:l,connectionMode:i,isValidConnection:s,lib:d,rfId:u,nodeLookup:g,connection:f}=C.getState();if(!E||!l&&!c)return;if(!l){null==t||t(e.nativeEvent,{nodeId:E,handleId:b,handleType:n}),C.setState({connectionClickStartHandle:{nodeId:E,type:n,id:b}});return}let p=(0,a.oj)(e.target),h=r||s,{connection:m,isValid:v}=a.aQ.isValid(e.nativeEvent,{handle:{nodeId:E,id:b,type:n},connectionMode:i,fromNodeId:l.nodeId,fromHandleId:l.id||null,fromType:l.type,isValidConnection:h,flowId:u,doc:p,lib:d,nodeLookup:g});v&&m&&B(m);let y=structuredClone(f);delete y.inProgress,y.toPosition=y.toHandle?y.toHandle.position:null,null==o||o(e,y),C.setState({connectionClickStartHandle:null})}:void 0,ref:t,...w,children:m})})),ek={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},eM={input:function(e){let{data:t,isConnectable:n,sourcePosition:o=a.yX.Bottom}=e;return(0,l.jsxs)(l.Fragment,{children:[null==t?void 0:t.label,(0,l.jsx)(eN,{type:"source",position:o,isConnectable:n})]})},default:function(e){let{data:t,isConnectable:n,targetPosition:o=a.yX.Top,sourcePosition:r=a.yX.Bottom}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eN,{type:"target",position:o,isConnectable:n}),null==t?void 0:t.label,(0,l.jsx)(eN,{type:"source",position:r,isConnectable:n})]})},output:function(e){let{data:t,isConnectable:n,targetPosition:o=a.yX.Top}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eN,{type:"target",position:o,isConnectable:n}),null==t?void 0:t.label]})},group:function(){return null}},eP=e=>{let{width:t,height:n,x:o,y:l}=(0,a.aZ)(e.nodeLookup,{filter:e=>!!e.selected});return{width:(0,a.kf)(t)?t:null,height:(0,a.kf)(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],") translate(").concat(o,"px,").concat(l,"px)")}};function eA(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:o}=e,a=h(),{width:s,height:c,transformString:u,userSelectionActive:g}=p(eP,d.x),f=ex(),m=(0,r.useRef)(null);if((0,r.useEffect)(()=>{if(!o){var e;null==(e=m.current)||e.focus({preventScroll:!0})}},[o]),ev({nodeRef:m}),g||!s||!c)return null;let v=t?e=>{t(e,a.getState().nodes.filter(e=>e.selected))}:void 0;return(0,l.jsx)("div",{className:(0,i.A)(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u},children:(0,l.jsx)("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:o?void 0:-1,onKeyDown:o?void 0:e=>{Object.prototype.hasOwnProperty.call(ek,e.key)&&(e.preventDefault(),f({direction:ek[e.key],factor:e.shiftKey?4:1}))},style:{width:s,height:c}})})}let ej="undefined"!=typeof window?window:void 0,eR=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function e_(e){let{children:t,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:d,paneClickDistance:c,deleteKeyCode:u,selectionKeyCode:g,selectionOnDrag:f,selectionMode:m,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:x,panActivationKeyCode:w,zoomActivationKeyCode:b,elementsSelectable:S,zoomOnScroll:C,zoomOnPinch:E,panOnScroll:N,panOnScrollSpeed:k,panOnScrollMode:M,zoomOnDoubleClick:P,panOnDrag:A,defaultViewport:j,translateExtent:R,minZoom:_,maxZoom:D,preventScrolling:I,onSelectionContextMenu:z,noWheelClassName:O,noPanClassName:B,disableKeyboardA11y:L,onViewportChange:V,isControlledViewport:F}=e,{nodesSelectionActive:Z,userSelectionActive:T}=p(eR),X=H(g,{target:ej}),W=H(w,{target:ej}),K=W||A,Y=W||N,Q=f&&!0!==K,U=X||T||Q;return!function(e){let{deleteKeyCode:t,multiSelectionKeyCode:n}=e,o=h(),{deleteElements:l}=er(),i=H(t,{actInsideInputWithModifier:!1}),a=H(n,{target:ea});(0,r.useEffect)(()=>{if(i){let{edges:e,nodes:t}=o.getState();l({nodes:t.filter(ei),edges:e.filter(ei)}),o.setState({nodesSelectionActive:!1})}},[i]),(0,r.useEffect)(()=>{o.setState({multiSelectionActive:a})},[a])}({deleteKeyCode:u,multiSelectionKeyCode:x}),(0,l.jsx)(ec,{onPaneContextMenu:s,elementsSelectable:S,zoomOnScroll:C,zoomOnPinch:E,panOnScroll:Y,panOnScrollSpeed:k,panOnScrollMode:M,zoomOnDoubleClick:P,panOnDrag:!X&&K,defaultViewport:j,translateExtent:R,minZoom:_,maxZoom:D,zoomActivationKeyCode:b,preventScrolling:I,noWheelClassName:O,noPanClassName:B,onViewportChange:V,isControlledViewport:F,paneClickDistance:c,children:(0,l.jsxs)(eh,{onSelectionStart:v,onSelectionEnd:y,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:d,panOnDrag:K,isSelecting:!!U,selectionMode:m,selectionKeyPressed:X,selectionOnDrag:Q,children:[t,Z&&(0,l.jsx)(eA,{onSelectionContextMenu:z,noPanClassName:B,disableKeyboardA11y:L})]})})}e_.displayName="FlowRenderer";let eD=(0,r.memo)(e_),eI=e=>t=>e?(0,a.U$)(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys()),ez=e=>e.updateNodeInternals;function eO(e){var t,n,o,s,c,u,g,f,m,v,x,w;let{id:b,onClick:S,onMouseEnter:C,onMouseMove:E,onMouseLeave:N,onContextMenu:k,onDoubleClick:M,nodesDraggable:P,elementsSelectable:A,nodesConnectable:j,nodesFocusable:R,resizeObserver:_,noDragClassName:D,noPanClassName:I,disableKeyboardA11y:z,rfId:O,nodeTypes:B,nodeClickDistance:L,onError:V}=e,{node:H,internals:F,isParent:Z}=p(e=>{let t=e.nodeLookup.get(b),n=e.parentLookup.has(b);return{node:t,internals:t.internals,isParent:n}},d.x),T=H.type||"default",X=(null==B?void 0:B[T])||eM[T];void 0===X&&(null==V||V("003",a.xc.error003(T)),T="default",X=eM.default);let W=!!(H.draggable||P&&void 0===H.draggable),K=!!(H.selectable||A&&void 0===H.selectable),Y=!!(H.connectable||j&&void 0===H.connectable),Q=!!(H.focusable||R&&void 0===H.focusable),U=h(),q=(0,a.QE)(H),G=function(e){let{node:t,nodeType:n,hasDimensions:o,resizeObserver:l}=e,i=h(),a=(0,r.useRef)(null),s=(0,r.useRef)(null),d=(0,r.useRef)(t.sourcePosition),c=(0,r.useRef)(t.targetPosition),u=(0,r.useRef)(n),g=o&&!!t.internals.handleBounds;return(0,r.useEffect)(()=>{!a.current||t.hidden||g&&s.current===a.current||(s.current&&(null==l||l.unobserve(s.current)),null==l||l.observe(a.current),s.current=a.current)},[g,t.hidden]),(0,r.useEffect)(()=>()=>{s.current&&(null==l||l.unobserve(s.current),s.current=null)},[]),(0,r.useEffect)(()=>{if(a.current){let e=u.current!==n,o=d.current!==t.sourcePosition,l=c.current!==t.targetPosition;(e||o||l)&&(u.current=n,d.current=t.sourcePosition,c.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:a.current,force:!0}]])))}},[t.id,n,t.sourcePosition,t.targetPosition]),a}({node:H,nodeType:T,hasDimensions:q,resizeObserver:_}),$=ev({nodeRef:G,disabled:H.hidden||!W,noDragClassName:D,handleSelector:H.dragHandle,nodeId:b,isSelectable:K,nodeClickDistance:L}),J=ex();if(H.hidden)return null;let ee=(0,a.uD)(H),et=void 0===H.internals.handleBounds?{width:null!=(f=null!=(g=H.width)?g:H.initialWidth)?f:null==(c=H.style)?void 0:c.width,height:null!=(v=null!=(m=H.height)?m:H.initialHeight)?v:null==(u=H.style)?void 0:u.height}:{width:null!=(x=H.width)?x:null==(o=H.style)?void 0:o.width,height:null!=(w=H.height)?w:null==(s=H.style)?void 0:s.height},en=K||W||S||C||E||N,eo=C?e=>C(e,{...F.userNode}):void 0,el=E?e=>E(e,{...F.userNode}):void 0,er=N?e=>N(e,{...F.userNode}):void 0,ei=k?e=>k(e,{...F.userNode}):void 0,ea=M?e=>M(e,{...F.userNode}):void 0;return(0,l.jsx)("div",{className:(0,i.A)(["react-flow__node","react-flow__node-".concat(T),{[I]:W},H.className,{selected:H.selected,selectable:K,parent:Z,draggable:W,dragging:$}]),ref:G,style:{zIndex:F.z,transform:"translate(".concat(F.positionAbsolute.x,"px,").concat(F.positionAbsolute.y,"px)"),pointerEvents:en?"all":"none",visibility:q?"visible":"hidden",...H.style,...et},"data-id":b,"data-testid":"rf__node-".concat(b),onMouseEnter:eo,onMouseMove:el,onMouseLeave:er,onContextMenu:ei,onClick:e=>{let{selectNodesOnDrag:t,nodeDragThreshold:n}=U.getState();K&&(!t||!W||n>0)&&em({id:b,store:U,nodeRef:G}),S&&S(e,{...F.userNode})},onDoubleClick:ea,onKeyDown:Q?e=>{!(0,a.v5)(e.nativeEvent)&&!z&&(a.tn.includes(e.key)&&K?em({id:b,store:U,unselect:"Escape"===e.key,nodeRef:G}):W&&H.selected&&Object.prototype.hasOwnProperty.call(ek,e.key)&&(e.preventDefault(),U.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~F.positionAbsolute.x,", y: ").concat(~~F.positionAbsolute.y)}),J({direction:ek[e.key],factor:e.shiftKey?4:1})))}:void 0,tabIndex:Q?0:void 0,role:Q?"button":void 0,"aria-describedby":z?void 0:"".concat(y,"-").concat(O),"aria-label":H.ariaLabel,children:(0,l.jsx)(eb,{value:b,children:(0,l.jsx)(X,{id:b,data:H.data,type:T,positionAbsoluteX:F.positionAbsolute.x,positionAbsoluteY:F.positionAbsolute.y,selected:null!=(t=H.selected)&&t,selectable:K,draggable:W,deletable:null==(n=H.deletable)||n,isConnectable:Y,sourcePosition:H.sourcePosition,targetPosition:H.targetPosition,dragging:$,dragHandle:H.dragHandle,zIndex:F.z,parentId:H.parentId,...ee})})})}let eB=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function eL(e){var t;let{nodesDraggable:n,nodesConnectable:o,nodesFocusable:i,elementsSelectable:a,onError:s}=p(eB,d.x),c=(t=e.onlyRenderVisibleElements,p((0,r.useCallback)(eI(t),[t]),d.x)),u=function(){let e=p(ez),[t]=(0,r.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t=>{let n=new Map;t.forEach(e=>{let t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,r.useEffect)(()=>()=>{null==t||t.disconnect()},[t]),t}();return(0,l.jsx)("div",{className:"react-flow__nodes",style:es,children:c.map(t=>(0,l.jsx)(eO,{id:t,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:n,nodesConnectable:o,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:s},t))})}eL.displayName="NodeRenderer";let eV=(0,r.memo)(eL),eH={[a.TG.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,l.jsx)("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[a.TG.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,l.jsx)("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},eF=e=>{let{id:t,type:n,color:o,width:i=12.5,height:s=12.5,markerUnits:d="strokeWidth",strokeWidth:c,orient:u="auto-start-reverse"}=e,g=function(e){let t=h();return(0,r.useMemo)(()=>{if(!Object.prototype.hasOwnProperty.call(eH,e)){var n,o;return null==(n=(o=t.getState()).onError)||n.call(o,"009",a.xc.error009(e)),null}return eH[e]},[e])}(n);return g?(0,l.jsx)("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(i),markerHeight:"".concat(s),viewBox:"-10 -10 20 20",markerUnits:d,orient:u,refX:"0",refY:"0",children:(0,l.jsx)(g,{color:o,strokeWidth:c})}):null},eZ=e=>{let{defaultColor:t,rfId:n}=e,o=p(e=>e.edges),i=p(e=>e.defaultEdgeOptions),s=(0,r.useMemo)(()=>(0,a.Hm)(o,{id:n,defaultColor:t,defaultMarkerStart:null==i?void 0:i.markerStart,defaultMarkerEnd:null==i?void 0:i.markerEnd}),[o,i,n,t]);return s.length?(0,l.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,l.jsx)("defs",{children:s.map(e=>(0,l.jsx)(eF,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};eZ.displayName="MarkerDefinitions";var eT=(0,r.memo)(eZ);function eX(e){let{x:t,y:n,label:o,labelStyle:a,labelShowBg:s=!0,labelBgStyle:d,labelBgPadding:c=[2,4],labelBgBorderRadius:u=2,children:g,className:f,...p}=e,[h,m]=(0,r.useState)({x:1,y:0,width:0,height:0}),v=(0,i.A)(["react-flow__edge-textwrapper",f]),y=(0,r.useRef)(null);return((0,r.useEffect)(()=>{if(y.current){let e=y.current.getBBox();m({x:e.x,y:e.y,width:e.width,height:e.height})}},[o]),o)?(0,l.jsxs)("g",{transform:"translate(".concat(t-h.width/2," ").concat(n-h.height/2,")"),className:v,visibility:h.width?"visible":"hidden",...p,children:[s&&(0,l.jsx)("rect",{width:h.width+2*c[0],x:-c[0],y:-c[1],height:h.height+2*c[1],className:"react-flow__edge-textbg",style:d,rx:u,ry:u}),(0,l.jsx)("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:y,style:a,children:o}),g]}):null}eX.displayName="EdgeText";let eW=(0,r.memo)(eX);function eK(e){let{path:t,labelX:n,labelY:o,label:r,labelStyle:s,labelShowBg:d,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:g,interactionWidth:f=20,...p}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{...p,d:t,fill:"none",className:(0,i.A)(["react-flow__edge-path",p.className])}),f&&(0,l.jsx)("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),r&&(0,a.kf)(n)&&(0,a.kf)(o)?(0,l.jsx)(eW,{x:n,y:o,label:r,labelStyle:s,labelShowBg:d,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:g}):null]})}function eY(e){let{pos:t,x1:n,y1:o,x2:l,y2:r}=e;return t===a.yX.Left||t===a.yX.Right?[.5*(n+l),o]:[n,.5*(o+r)]}function eQ(e){let{sourceX:t,sourceY:n,sourcePosition:o=a.yX.Bottom,targetX:l,targetY:r,targetPosition:i=a.yX.Top}=e,[s,d]=eY({pos:o,x1:t,y1:n,x2:l,y2:r}),[c,u]=eY({pos:i,x1:l,y1:r,x2:t,y2:n}),[g,f,p,h]=(0,a.e_)({sourceX:t,sourceY:n,targetX:l,targetY:r,sourceControlX:s,sourceControlY:d,targetControlX:c,targetControlY:u});return["M".concat(t,",").concat(n," C").concat(s,",").concat(d," ").concat(c,",").concat(u," ").concat(l,",").concat(r),g,f,p,h]}function eU(e){return(0,r.memo)(t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:a,sourcePosition:s,targetPosition:d,label:c,labelStyle:u,labelShowBg:g,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:m,markerEnd:v,markerStart:y,interactionWidth:x}=t,[w,b,S]=eQ({sourceX:o,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:d}),C=e.isInternal?void 0:n;return(0,l.jsx)(eK,{id:C,path:w,labelX:b,labelY:S,label:c,labelStyle:u,labelShowBg:g,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:m,markerEnd:v,markerStart:y,interactionWidth:x})})}let eq=eU({isInternal:!1}),eG=eU({isInternal:!0});function e$(e){return(0,r.memo)(t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:s,label:d,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:f,labelBgBorderRadius:p,style:h,sourcePosition:m=a.yX.Bottom,targetPosition:v=a.yX.Top,markerEnd:y,markerStart:x,pathOptions:w,interactionWidth:b}=t,[S,C,E]=(0,a.oN)({sourceX:o,sourceY:r,sourcePosition:m,targetX:i,targetY:s,targetPosition:v,borderRadius:null==w?void 0:w.borderRadius,offset:null==w?void 0:w.offset}),N=e.isInternal?void 0:n;return(0,l.jsx)(eK,{id:N,path:S,labelX:C,labelY:E,label:d,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:f,labelBgBorderRadius:p,style:h,markerEnd:y,markerStart:x,interactionWidth:b})})}eq.displayName="SimpleBezierEdge",eG.displayName="SimpleBezierEdgeInternal";let eJ=e$({isInternal:!1}),e0=e$({isInternal:!0});function e1(e){return(0,r.memo)(t=>{var n;let{id:o,...i}=t,a=e.isInternal?void 0:o;return(0,l.jsx)(eJ,{...i,id:a,pathOptions:(0,r.useMemo)(()=>{var e;return{borderRadius:0,offset:null==(e=i.pathOptions)?void 0:e.offset}},[null==(n=i.pathOptions)?void 0:n.offset])})})}eJ.displayName="SmoothStepEdge",e0.displayName="SmoothStepEdgeInternal";let e2=e1({isInternal:!1}),e3=e1({isInternal:!0});function e4(e){return(0,r.memo)(t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:s,label:d,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:f,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:v,interactionWidth:y}=t,[x,w,b]=(0,a.ah)({sourceX:o,sourceY:r,targetX:i,targetY:s}),S=e.isInternal?void 0:n;return(0,l.jsx)(eK,{id:S,path:x,labelX:w,labelY:b,label:d,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:f,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:v,interactionWidth:y})})}e2.displayName="StepEdge",e3.displayName="StepEdgeInternal";let e5=e4({isInternal:!1}),e6=e4({isInternal:!0});function e7(e){return(0,r.memo)(t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:s,sourcePosition:d=a.yX.Bottom,targetPosition:c=a.yX.Top,label:u,labelStyle:g,labelShowBg:f,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:m,style:v,markerEnd:y,markerStart:x,pathOptions:w,interactionWidth:b}=t,[S,C,E]=(0,a.Fp)({sourceX:o,sourceY:r,sourcePosition:d,targetX:i,targetY:s,targetPosition:c,curvature:null==w?void 0:w.curvature}),N=e.isInternal?void 0:n;return(0,l.jsx)(eK,{id:N,path:S,labelX:C,labelY:E,label:u,labelStyle:g,labelShowBg:f,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:m,style:v,markerEnd:y,markerStart:x,interactionWidth:b})})}e5.displayName="StraightEdge",e6.displayName="StraightEdgeInternal";let e8=e7({isInternal:!1}),e9=e7({isInternal:!0});e8.displayName="BezierEdge",e9.displayName="BezierEdgeInternal";let te={default:e9,straight:e6,step:e3,smoothstep:e0,simplebezier:eG},tt={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},tn=(e,t,n)=>n===a.yX.Left?e-t:n===a.yX.Right?e+t:e,to=(e,t,n)=>n===a.yX.Top?e-t:n===a.yX.Bottom?e+t:e,tl="react-flow__edgeupdater";function tr(e){let{position:t,centerX:n,centerY:o,radius:r=10,onMouseDown:a,onMouseEnter:s,onMouseOut:d,type:c}=e;return(0,l.jsx)("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:d,className:(0,i.A)([tl,"".concat(tl,"-").concat(c)]),cx:tn(n,r,t),cy:to(o,r,t),r:r,stroke:"transparent",fill:"transparent"})}function ti(e){let{isReconnectable:t,reconnectRadius:n,edge:o,sourceX:r,sourceY:i,targetX:s,targetY:d,sourcePosition:c,targetPosition:u,onReconnect:g,onReconnectStart:f,onReconnectEnd:p,setReconnecting:m,setUpdateHover:v}=e,y=h(),x=(e,t)=>{if(0!==e.button)return;let{autoPanOnConnect:n,domNode:l,isValidConnection:r,connectionMode:i,connectionRadius:s,lib:d,onConnectStart:c,onConnectEnd:u,cancelConnection:h,nodeLookup:v,rfId:x,panBy:w,updateConnection:b}=y.getState(),S="target"===t.type;m(!0),null==f||f(e,o,t.type),a.aQ.onPointerDown(e.nativeEvent,{autoPanOnConnect:n,connectionMode:i,connectionRadius:s,domNode:l,handleId:t.id,nodeId:t.nodeId,nodeLookup:v,isTarget:S,edgeUpdaterType:t.type,lib:d,flowId:x,cancelConnection:h,panBy:w,isValidConnection:r,onConnect:e=>null==g?void 0:g(o,e),onConnectStart:c,onConnectEnd:u,onReconnectEnd:(e,n)=>{m(!1),null==p||p(e,o,t.type,n)},updateConnection:b,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle})},w=()=>v(!0),b=()=>v(!1);return(0,l.jsxs)(l.Fragment,{children:[(!0===t||"source"===t)&&(0,l.jsx)(tr,{position:c,centerX:r,centerY:i,radius:n,onMouseDown:e=>{var t;return x(e,{nodeId:o.target,id:null!=(t=o.targetHandle)?t:null,type:"target"})},onMouseEnter:w,onMouseOut:b,type:"source"}),(!0===t||"target"===t)&&(0,l.jsx)(tr,{position:u,centerX:s,centerY:d,radius:n,onMouseDown:e=>{var t;return x(e,{nodeId:o.source,id:null!=(t=o.sourceHandle)?t:null,type:"source"})},onMouseEnter:w,onMouseOut:b,type:"target"})]})}function ta(e){var t;let{id:n,edgesFocusable:o,edgesReconnectable:s,elementsSelectable:c,onClick:u,onDoubleClick:g,onContextMenu:f,onMouseEnter:m,onMouseMove:v,onMouseLeave:y,reconnectRadius:w,onReconnect:b,onReconnectStart:S,onReconnectEnd:C,rfId:E,edgeTypes:N,noPanClassName:k,onError:M,disableKeyboardA11y:P}=e,A=p(e=>e.edgeLookup.get(n)),j=p(e=>e.defaultEdgeOptions),R=(A=j?{...j,...A}:A).type||"default",_=(null==N?void 0:N[R])||te[R];void 0===_&&(null==M||M("011",a.xc.error011(R)),R="default",_=te.default);let D=!!(A.focusable||o&&void 0===A.focusable),I=void 0!==b&&(A.reconnectable||s&&void 0===A.reconnectable),z=!!(A.selectable||c&&void 0===A.selectable),O=(0,r.useRef)(null),[B,L]=(0,r.useState)(!1),[V,H]=(0,r.useState)(!1),F=h(),{zIndex:Z,sourceX:T,sourceY:X,targetX:W,targetY:K,sourcePosition:Y,targetPosition:Q}=p((0,r.useCallback)(e=>{let t=e.nodeLookup.get(A.source),o=e.nodeLookup.get(A.target);if(!t||!o)return{zIndex:A.zIndex,...tt};let l=(0,a.b5)({id:n,sourceNode:t,targetNode:o,sourceHandle:A.sourceHandle||null,targetHandle:A.targetHandle||null,connectionMode:e.connectionMode,onError:M});return{zIndex:(0,a.qX)({selected:A.selected,zIndex:A.zIndex,sourceNode:t,targetNode:o,elevateOnSelect:e.elevateEdgesOnSelect}),...l||tt}},[A.source,A.target,A.sourceHandle,A.targetHandle,A.selected,A.zIndex]),d.x),U=(0,r.useMemo)(()=>A.markerStart?"url('#".concat((0,a.aW)(A.markerStart,E),"')"):void 0,[A.markerStart,E]),q=(0,r.useMemo)(()=>A.markerEnd?"url('#".concat((0,a.aW)(A.markerEnd,E),"')"):void 0,[A.markerEnd,E]);if(A.hidden||null===T||null===X||null===W||null===K)return null;let G=g?e=>{g(e,{...A})}:void 0,$=f?e=>{f(e,{...A})}:void 0,J=m?e=>{m(e,{...A})}:void 0,ee=v?e=>{v(e,{...A})}:void 0,et=y?e=>{y(e,{...A})}:void 0;return(0,l.jsx)("svg",{style:{zIndex:Z},children:(0,l.jsxs)("g",{className:(0,i.A)(["react-flow__edge","react-flow__edge-".concat(R),A.className,k,{selected:A.selected,animated:A.animated,inactive:!z&&!u,updating:B,selectable:z}]),onClick:e=>{let{addSelectedEdges:t,unselectNodesAndEdges:o,multiSelectionActive:l}=F.getState();if(z)if(F.setState({nodesSelectionActive:!1}),A.selected&&l){var r;o({nodes:[],edges:[A]}),null==(r=O.current)||r.blur()}else t([n]);u&&u(e,A)},onDoubleClick:G,onContextMenu:$,onMouseEnter:J,onMouseMove:ee,onMouseLeave:et,onKeyDown:D?e=>{if(!P&&a.tn.includes(e.key)&&z){let{unselectNodesAndEdges:o,addSelectedEdges:l}=F.getState();if("Escape"===e.key){var t;null==(t=O.current)||t.blur(),o({edges:[A]})}else l([n])}}:void 0,tabIndex:D?0:void 0,role:D?"button":"img","data-id":n,"data-testid":"rf__edge-".concat(n),"aria-label":null===A.ariaLabel?void 0:A.ariaLabel||"Edge from ".concat(A.source," to ").concat(A.target),"aria-describedby":D?"".concat(x,"-").concat(E):void 0,ref:O,children:[!V&&(0,l.jsx)(_,{id:n,source:A.source,target:A.target,type:A.type,selected:A.selected,animated:A.animated,selectable:z,deletable:null==(t=A.deletable)||t,label:A.label,labelStyle:A.labelStyle,labelShowBg:A.labelShowBg,labelBgStyle:A.labelBgStyle,labelBgPadding:A.labelBgPadding,labelBgBorderRadius:A.labelBgBorderRadius,sourceX:T,sourceY:X,targetX:W,targetY:K,sourcePosition:Y,targetPosition:Q,data:A.data,style:A.style,sourceHandleId:A.sourceHandle,targetHandleId:A.targetHandle,markerStart:U,markerEnd:q,pathOptions:"pathOptions"in A?A.pathOptions:void 0,interactionWidth:A.interactionWidth}),I&&(0,l.jsx)(ti,{edge:A,isReconnectable:I,reconnectRadius:w,onReconnect:b,onReconnectStart:S,onReconnectEnd:C,sourceX:T,sourceY:X,targetX:W,targetY:K,sourcePosition:Y,targetPosition:Q,setUpdateHover:L,setReconnecting:H})]})})}let ts=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function td(e){let{defaultMarkerColor:t,onlyRenderVisibleElements:n,rfId:o,edgeTypes:i,noPanClassName:s,onReconnect:c,onEdgeContextMenu:u,onEdgeMouseEnter:g,onEdgeMouseMove:f,onEdgeMouseLeave:h,onEdgeClick:m,reconnectRadius:v,onEdgeDoubleClick:y,onReconnectStart:x,onReconnectEnd:w,disableKeyboardA11y:b}=e,{edgesFocusable:S,edgesReconnectable:C,elementsSelectable:E,onError:N}=p(ts,d.x),k=p((0,r.useCallback)(e=>{if(!n)return e.edges.map(e=>e.id);let t=[];if(e.width&&e.height)for(let n of e.edges){let o=e.nodeLookup.get(n.source),l=e.nodeLookup.get(n.target);o&&l&&(0,a.uj)({sourceNode:o,targetNode:l,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t},[n]),d.x);return(0,l.jsxs)("div",{className:"react-flow__edges",children:[(0,l.jsx)(eT,{defaultColor:t,rfId:o}),k.map(e=>(0,l.jsx)(ta,{id:e,edgesFocusable:S,edgesReconnectable:C,elementsSelectable:E,noPanClassName:s,onReconnect:c,onContextMenu:u,onMouseEnter:g,onMouseMove:f,onMouseLeave:h,onClick:m,reconnectRadius:v,onDoubleClick:y,onReconnectStart:x,onReconnectEnd:w,rfId:o,onError:N,edgeTypes:i,disableKeyboardA11y:b},e))]})}td.displayName="EdgeRenderer";let tc=(0,r.memo)(td),tu=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function tg(e){let{children:t}=e,n=p(tu);return(0,l.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:t})}let tf=e=>{var t;return null==(t=e.panZoom)?void 0:t.syncViewport};function tp(e){return e.connection.inProgress?{...e.connection,to:(0,a.Ff)(e.connection.to,e.transform)}:{...e.connection}}function th(e){return p(e?t=>e(tp(t)):tp,d.x)}let tm=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function tv(e){let{containerStyle:t,style:n,type:o,component:r}=e,{nodesConnectable:s,width:c,height:u,isValid:g,inProgress:f}=p(tm,d.x);return c&&s&&f?(0,l.jsx)("svg",{style:t,width:c,height:u,className:"react-flow__connectionline react-flow__container",children:(0,l.jsx)("g",{className:(0,i.A)(["react-flow__connection",(0,a.HF)(g)]),children:(0,l.jsx)(ty,{style:n,type:o,CustomComponent:r,isValid:g})})}):null}let ty=e=>{let{style:t,type:n=a.Do.Bezier,CustomComponent:o,isValid:r}=e,{inProgress:i,from:s,fromNode:d,fromHandle:c,fromPosition:u,to:g,toNode:f,toHandle:p,toPosition:h}=th();if(!i)return;if(o)return(0,l.jsx)(o,{connectionLineType:n,connectionLineStyle:t,fromNode:d,fromHandle:c,fromX:s.x,fromY:s.y,toX:g.x,toY:g.y,fromPosition:u,toPosition:h,connectionStatus:(0,a.HF)(r),toNode:f,toHandle:p});let m="",v={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:g.x,targetY:g.y,targetPosition:h};switch(n){case a.Do.Bezier:[m]=(0,a.Fp)(v);break;case a.Do.SimpleBezier:[m]=eQ(v);break;case a.Do.Step:[m]=(0,a.oN)({...v,borderRadius:0});break;case a.Do.SmoothStep:[m]=(0,a.oN)(v);break;default:[m]=(0,a.ah)(v)}return(0,l.jsx)("path",{d:m,fill:"none",className:"react-flow__connection-path",style:t})};ty.displayName="ConnectionLine";let tx={};function tw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tx;(0,r.useRef)(e),h(),(0,r.useEffect)(()=>{},[e])}function tb(e){let{nodeTypes:t,edgeTypes:n,onInit:o,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:d,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:g,onNodeContextMenu:f,onSelectionContextMenu:m,onSelectionStart:v,onSelectionEnd:y,connectionLineType:x,connectionLineStyle:w,connectionLineComponent:b,connectionLineContainerStyle:S,selectionKeyCode:C,selectionOnDrag:E,selectionMode:N,multiSelectionKeyCode:k,panActivationKeyCode:M,zoomActivationKeyCode:P,deleteKeyCode:A,onlyRenderVisibleElements:j,elementsSelectable:R,defaultViewport:_,translateExtent:D,minZoom:I,maxZoom:z,preventScrolling:O,defaultMarkerColor:B,zoomOnScroll:L,zoomOnPinch:V,panOnScroll:H,panOnScrollSpeed:F,panOnScrollMode:Z,zoomOnDoubleClick:T,panOnDrag:X,onPaneClick:W,onPaneMouseEnter:K,onPaneMouseMove:Y,onPaneMouseLeave:Q,onPaneScroll:U,onPaneContextMenu:q,paneClickDistance:G,nodeClickDistance:$,onEdgeContextMenu:J,onEdgeMouseEnter:ee,onEdgeMouseMove:et,onEdgeMouseLeave:en,reconnectRadius:eo,onReconnect:el,onReconnectStart:ei,onReconnectEnd:ea,noDragClassName:es,noWheelClassName:ed,noPanClassName:ec,disableKeyboardA11y:eu,nodeExtent:eg,rfId:ef,viewport:ep,onViewportChange:eh}=e;tw(t),tw(n),h(),(0,r.useRef)(!1),(0,r.useEffect)(()=>{},[]);let em=er(),ev=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{!ev.current&&em.viewportInitialized&&o&&(setTimeout(()=>o(em),1),ev.current=!0)},[o,em.viewportInitialized]),!function(e){let t=p(tf),n=h();(0,r.useEffect)(()=>{e&&(null==t||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t])}(ep),(0,l.jsx)(eD,{onPaneClick:W,onPaneMouseEnter:K,onPaneMouseMove:Y,onPaneMouseLeave:Q,onPaneContextMenu:q,onPaneScroll:U,paneClickDistance:G,deleteKeyCode:A,selectionKeyCode:C,selectionOnDrag:E,selectionMode:N,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:k,panActivationKeyCode:M,zoomActivationKeyCode:P,elementsSelectable:R,zoomOnScroll:L,zoomOnPinch:V,zoomOnDoubleClick:T,panOnScroll:H,panOnScrollSpeed:F,panOnScrollMode:Z,panOnDrag:X,defaultViewport:_,translateExtent:D,minZoom:I,maxZoom:z,onSelectionContextMenu:m,preventScrolling:O,noDragClassName:es,noWheelClassName:ed,noPanClassName:ec,disableKeyboardA11y:eu,onViewportChange:eh,isControlledViewport:!!ep,children:(0,l.jsxs)(tg,{children:[(0,l.jsx)(tc,{edgeTypes:n,onEdgeClick:a,onEdgeDoubleClick:d,onReconnect:el,onReconnectStart:ei,onReconnectEnd:ea,onlyRenderVisibleElements:j,onEdgeContextMenu:J,onEdgeMouseEnter:ee,onEdgeMouseMove:et,onEdgeMouseLeave:en,reconnectRadius:eo,defaultMarkerColor:B,noPanClassName:ec,disableKeyboardA11y:eu,rfId:ef}),(0,l.jsx)(tv,{style:w,type:x,component:b,containerStyle:S}),(0,l.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,l.jsx)(eV,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:g,onNodeContextMenu:f,nodeClickDistance:$,onlyRenderVisibleElements:j,noPanClassName:ec,noDragClassName:es,disableKeyboardA11y:eu,nodeExtent:eg,rfId:ef}),(0,l.jsx)("div",{className:"react-flow__viewport-portal"})]})})}tb.displayName="GraphView";let tS=(0,r.memo)(tb),tC=function(){var e,t,n;let{nodes:o,edges:l,defaultNodes:r,defaultEdges:i,width:s,height:d,fitView:c,fitViewOptions:u,minZoom:g=.5,maxZoom:f=2,nodeOrigin:p,nodeExtent:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=new Map,v=new Map,y=new Map,x=new Map,w=null!=(e=null!=i?i:l)?e:[],b=null!=(t=null!=r?r:o)?t:[],S=null!=p?p:[0,0],C=null!=h?h:a.ZO;(0,a.qn)(y,x,w);let E=(0,a.bi)(b,m,v,{nodeOrigin:S,nodeExtent:C,elevateNodesOnSelect:!1}),N=[0,0,1];if(c&&s&&d){let e=(0,a.aZ)(m,{filter:e=>!!((e.width||e.initialWidth)&&(e.height||e.initialHeight))}),{x:t,y:o,zoom:l}=(0,a.R4)(e,s,d,g,f,null!=(n=null==u?void 0:u.padding)?n:.1);N=[t,o,l]}return{rfId:"1",width:0,height:0,transform:N,nodes:b,nodesInitialized:E,nodeLookup:m,parentLookup:v,edges:w,edgeLookup:x,connectionLookup:y,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==r,hasDefaultEdges:void 0!==i,panZoom:null,minZoom:g,maxZoom:f,translateExtent:a.ZO,nodeExtent:C,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:a.WZ.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:null!=c&&c,fitViewOptions:u,fitViewResolver:null,connection:{...a.bK},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:a.KE,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},tE=e=>{let{nodes:t,edges:n,defaultNodes:o,defaultEdges:l,width:r,height:i,fitView:d,fitViewOptions:c,minZoom:u,maxZoom:g,nodeOrigin:f,nodeExtent:p}=e;return(0,s.h)((e,s)=>{async function h(){let{nodeLookup:t,panZoom:n,fitViewOptions:o,fitViewResolver:l,width:r,height:i,minZoom:d,maxZoom:c}=s();n&&(await (0,a.IO)({nodes:t,width:r,height:i,panZoom:n,minZoom:d,maxZoom:c},o),null==l||l.resolve(!0),e({fitViewResolver:null}))}return{...tC({nodes:t,edges:n,width:r,height:i,fitView:d,fitViewOptions:c,minZoom:u,maxZoom:g,nodeOrigin:f,nodeExtent:p,defaultNodes:o,defaultEdges:l}),setNodes:t=>{let{nodeLookup:n,parentLookup:o,nodeOrigin:l,elevateNodesOnSelect:r,fitViewQueued:i}=s(),d=(0,a.bi)(t,n,o,{nodeOrigin:l,nodeExtent:p,elevateNodesOnSelect:r,checkEquality:!0});i&&d?(h(),e({nodes:t,nodesInitialized:d,fitViewQueued:!1,fitViewOptions:void 0})):e({nodes:t,nodesInitialized:d})},setEdges:t=>{let{connectionLookup:n,edgeLookup:o}=s();(0,a.qn)(n,o,t),e({edges:t})},setDefaultNodesAndEdges:(t,n)=>{if(t){let{setNodes:n}=s();n(t),e({hasDefaultNodes:!0})}if(n){let{setEdges:t}=s();t(n),e({hasDefaultEdges:!0})}},updateNodeInternals:t=>{let{triggerNodeChanges:n,nodeLookup:o,parentLookup:l,domNode:r,nodeOrigin:i,nodeExtent:d,debug:c,fitViewQueued:u}=s(),{changes:g,updatedInternals:f}=(0,a.uL)(t,o,l,r,i,d);f&&((0,a.vS)(o,l,{nodeOrigin:i,nodeExtent:d}),u?(h(),e({fitViewQueued:!1,fitViewOptions:void 0})):e({}),(null==g?void 0:g.length)>0&&(c&&console.log("React Flow: trigger node changes",g),null==n||n(g)))},updateNodePositions:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],o=[],{nodeLookup:l,triggerNodeChanges:r}=s();for(let[r,a]of e){let e=l.get(r),s=!!((null==e?void 0:e.expandParent)&&(null==e?void 0:e.parentId)&&(null==a?void 0:a.position)),c={id:r,type:"position",position:s?{x:Math.max(0,a.position.x),y:Math.max(0,a.position.y)}:a.position,dragging:t};if(s&&e.parentId){var i,d;n.push({id:r,parentId:e.parentId,rect:{...a.internals.positionAbsolute,width:null!=(i=a.measured.width)?i:0,height:null!=(d=a.measured.height)?d:0}})}o.push(c)}if(n.length>0){let{parentLookup:e,nodeOrigin:t}=s(),r=(0,a.r8)(n,l,e,t);o.push(...r)}r(o)},triggerNodeChanges:e=>{let{onNodesChange:t,setNodes:n,nodes:o,hasDefaultNodes:l,debug:r}=s();(null==e?void 0:e.length)&&(l&&n(X(e,o)),r&&console.log("React Flow: trigger node changes",e),null==t||t(e))},triggerEdgeChanges:e=>{let{onEdgesChange:t,setEdges:n,edges:o,hasDefaultEdges:l,debug:r}=s();(null==e?void 0:e.length)&&(l&&n(X(e,o)),r&&console.log("React Flow: trigger edge changes",e),null==t||t(e))},addSelectedNodes:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:l,triggerEdgeChanges:r}=s();if(t)return void l(e.map(e=>Y(e,!0)));l(Q(o,new Set([...e]),!0)),r(Q(n))},addSelectedEdges:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:l,triggerEdgeChanges:r}=s();if(t)return void r(e.map(e=>Y(e,!0)));r(Q(n,new Set([...e]))),l(Q(o,new Set,!0))},unselectNodesAndEdges:function(){let{nodes:e,edges:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{edges:n,nodes:o,nodeLookup:l,triggerNodeChanges:r,triggerEdgeChanges:i}=s(),a=(e||o).map(e=>{let t=l.get(e.id);return t&&(t.selected=!1),Y(e.id,!1)}),d=(t||n).map(e=>Y(e.id,!1));r(a),i(d)},setMinZoom:t=>{let{panZoom:n,maxZoom:o}=s();null==n||n.setScaleExtent([t,o]),e({minZoom:t})},setMaxZoom:t=>{let{panZoom:n,minZoom:o}=s();null==n||n.setScaleExtent([o,t]),e({maxZoom:t})},setTranslateExtent:t=>{var n;null==(n=s().panZoom)||n.setTranslateExtent(t),e({translateExtent:t})},setPaneClickDistance:e=>{var t;null==(t=s().panZoom)||t.setClickDistance(e)},resetSelectedElements:()=>{let{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:o,elementsSelectable:l}=s();if(!l)return;let r=t.reduce((e,t)=>t.selected?[...e,Y(t.id,!1)]:e,[]),i=e.reduce((e,t)=>t.selected?[...e,Y(t.id,!1)]:e,[]);n(r),o(i)},setNodeExtent:t=>{let{nodes:n,nodeLookup:o,parentLookup:l,nodeOrigin:r,elevateNodesOnSelect:i,nodeExtent:d}=s();(t[0][0]!==d[0][0]||t[0][1]!==d[0][1]||t[1][0]!==d[1][0]||t[1][1]!==d[1][1])&&((0,a.bi)(n,o,l,{nodeOrigin:r,nodeExtent:t,elevateNodesOnSelect:i,checkEquality:!1}),e({nodeExtent:t}))},panBy:e=>{let{transform:t,width:n,height:o,panZoom:l,translateExtent:r}=s();return(0,a.No)({delta:e,panZoom:l,transform:t,translateExtent:r,width:n,height:o})},cancelConnection:()=>{e({connection:{...a.bK}})},updateConnection:t=>{e({connection:t})},reset:()=>e({...tC()})}},Object.is)};function tN(e){let{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:i,initialWidth:a,initialHeight:s,initialMinZoom:d,initialMaxZoom:c,initialFitViewOptions:u,fitView:f,nodeOrigin:p,nodeExtent:h,children:m}=e,[v]=(0,r.useState)(()=>tE({nodes:t,edges:n,defaultNodes:o,defaultEdges:i,width:a,height:s,fitView:f,minZoom:d,maxZoom:c,fitViewOptions:u,nodeOrigin:p,nodeExtent:h}));return(0,l.jsx)(g,{value:v,children:(0,l.jsx)(eo,{children:m})})}function tk(e){let{children:t,nodes:n,edges:o,defaultNodes:i,defaultEdges:a,width:s,height:d,fitView:c,fitViewOptions:g,minZoom:f,maxZoom:p,nodeOrigin:h,nodeExtent:m}=e;return(0,r.useContext)(u)?(0,l.jsx)(l.Fragment,{children:t}):(0,l.jsx)(tN,{initialNodes:n,initialEdges:o,defaultNodes:i,defaultEdges:a,initialWidth:s,initialHeight:d,fitView:c,initialFitViewOptions:g,initialMinZoom:f,initialMaxZoom:p,nodeOrigin:h,nodeExtent:m,children:t})}let tM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var tP=J(function(e,t){let{nodes:n,edges:o,defaultNodes:s,defaultEdges:d,className:c,nodeTypes:u,edgeTypes:g,onNodeClick:f,onEdgeClick:p,onInit:h,onMove:m,onMoveStart:v,onMoveEnd:y,onConnect:x,onConnectStart:w,onConnectEnd:b,onClickConnectStart:C,onClickConnectEnd:E,onNodeMouseEnter:k,onNodeMouseMove:M,onNodeMouseLeave:P,onNodeContextMenu:A,onNodeDoubleClick:j,onNodeDragStart:I,onNodeDrag:z,onNodeDragStop:O,onNodesDelete:V,onEdgesDelete:H,onDelete:F,onSelectionChange:Z,onSelectionDragStart:T,onSelectionDrag:X,onSelectionDragStop:W,onSelectionContextMenu:K,onSelectionStart:Y,onSelectionEnd:Q,onBeforeDelete:U,connectionMode:q,connectionLineType:G=a.Do.Bezier,connectionLineStyle:$,connectionLineComponent:J,connectionLineContainerStyle:ee,deleteKeyCode:et="Backspace",selectionKeyCode:en="Shift",selectionOnDrag:eo=!1,selectionMode:el=a.Qc.Full,panActivationKeyCode:er="Space",multiSelectionKeyCode:ei=(0,a.Ue)()?"Meta":"Control",zoomActivationKeyCode:ea=(0,a.Ue)()?"Meta":"Control",snapToGrid:es,snapGrid:ed,onlyRenderVisibleElements:ec=!1,selectNodesOnDrag:eu,nodesDraggable:eg,nodesConnectable:ef,nodesFocusable:ep,nodeOrigin:eh=_,edgesFocusable:em,edgesReconnectable:ev,elementsSelectable:ey=!0,defaultViewport:ex=D,minZoom:ew=.5,maxZoom:eb=2,translateExtent:eS=a.ZO,preventScrolling:eC=!0,nodeExtent:eE,defaultMarkerColor:eN="#b1b1b7",zoomOnScroll:ek=!0,zoomOnPinch:eM=!0,panOnScroll:eP=!1,panOnScrollSpeed:eA=.5,panOnScrollMode:ej=a.ny.Free,zoomOnDoubleClick:eR=!0,panOnDrag:e_=!0,onPaneClick:eD,onPaneMouseEnter:eI,onPaneMouseMove:ez,onPaneMouseLeave:eO,onPaneScroll:eB,onPaneContextMenu:eL,paneClickDistance:eV=0,nodeClickDistance:eH=0,children:eF,onReconnect:eZ,onReconnectStart:eT,onReconnectEnd:eX,onEdgeContextMenu:eW,onEdgeDoubleClick:eK,onEdgeMouseEnter:eY,onEdgeMouseMove:eQ,onEdgeMouseLeave:eU,reconnectRadius:eq=10,onNodesChange:eG,onEdgesChange:e$,noDragClassName:eJ="nodrag",noWheelClassName:e0="nowheel",noPanClassName:e1="nopan",fitView:e2,fitViewOptions:e3,connectOnClick:e4,attributionPosition:e5,proOptions:e6,defaultEdgeOptions:e7,elevateNodesOnSelect:e8,elevateEdgesOnSelect:e9,disableKeyboardA11y:te=!1,autoPanOnConnect:tt,autoPanOnNodeDrag:tn,autoPanSpeed:to,connectionRadius:tl,isValidConnection:tr,onError:ti,style:ta,id:ts,nodeDragThreshold:td,viewport:tc,onViewportChange:tu,width:tg,height:tf,colorMode:tp="light",debug:th,onScroll:tm,...tv}=e,ty=ts||"1",tx=function(e){var t;let[n,o]=(0,r.useState)("system"===e?null:e);return(0,r.useEffect)(()=>{if("system"!==e)return void o(e);let t=L(),n=()=>o((null==t?void 0:t.matches)?"dark":"light");return n(),null==t||t.addEventListener("change",n),()=>{null==t||t.removeEventListener("change",n)}},[e]),null!==n?n:(null==(t=L())?void 0:t.matches)?"dark":"light"}(tp),tw=(0,r.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),null==tm||tm(e)},[tm]);return(0,l.jsx)("div",{"data-testid":"rf__wrapper",...tv,onScroll:tw,style:{...ta,...tM},ref:t,className:(0,i.A)(["react-flow",c,tx]),id:ts,children:(0,l.jsxs)(tk,{nodes:n,edges:o,width:tg,height:tf,fitView:e2,fitViewOptions:e3,minZoom:ew,maxZoom:eb,nodeOrigin:eh,nodeExtent:eE,children:[(0,l.jsx)(tS,{onInit:h,onNodeClick:f,onEdgeClick:p,onNodeMouseEnter:k,onNodeMouseMove:M,onNodeMouseLeave:P,onNodeContextMenu:A,onNodeDoubleClick:j,nodeTypes:u,edgeTypes:g,connectionLineType:G,connectionLineStyle:$,connectionLineComponent:J,connectionLineContainerStyle:ee,selectionKeyCode:en,selectionOnDrag:eo,selectionMode:el,deleteKeyCode:et,multiSelectionKeyCode:ei,panActivationKeyCode:er,zoomActivationKeyCode:ea,onlyRenderVisibleElements:ec,defaultViewport:ex,translateExtent:eS,minZoom:ew,maxZoom:eb,preventScrolling:eC,zoomOnScroll:ek,zoomOnPinch:eM,zoomOnDoubleClick:eR,panOnScroll:eP,panOnScrollSpeed:eA,panOnScrollMode:ej,panOnDrag:e_,onPaneClick:eD,onPaneMouseEnter:eI,onPaneMouseMove:ez,onPaneMouseLeave:eO,onPaneScroll:eB,onPaneContextMenu:eL,paneClickDistance:eV,nodeClickDistance:eH,onSelectionContextMenu:K,onSelectionStart:Y,onSelectionEnd:Q,onReconnect:eZ,onReconnectStart:eT,onReconnectEnd:eX,onEdgeContextMenu:eW,onEdgeDoubleClick:eK,onEdgeMouseEnter:eY,onEdgeMouseMove:eQ,onEdgeMouseLeave:eU,reconnectRadius:eq,defaultMarkerColor:eN,noDragClassName:eJ,noWheelClassName:e0,noPanClassName:e1,rfId:ty,disableKeyboardA11y:te,nodeExtent:eE,viewport:tc,onViewportChange:tu}),(0,l.jsx)(B,{nodes:n,edges:o,defaultNodes:s,defaultEdges:d,onConnect:x,onConnectStart:w,onConnectEnd:b,onClickConnectStart:C,onClickConnectEnd:E,nodesDraggable:eg,nodesConnectable:ef,nodesFocusable:ep,edgesFocusable:em,edgesReconnectable:ev,elementsSelectable:ey,elevateNodesOnSelect:e8,elevateEdgesOnSelect:e9,minZoom:ew,maxZoom:eb,nodeExtent:eE,onNodesChange:eG,onEdgesChange:e$,snapToGrid:es,snapGrid:ed,connectionMode:q,translateExtent:eS,connectOnClick:e4,defaultEdgeOptions:e7,fitView:e2,fitViewOptions:e3,onNodesDelete:V,onEdgesDelete:H,onDelete:F,onNodeDragStart:I,onNodeDrag:z,onNodeDragStop:O,onSelectionDrag:X,onSelectionDragStart:T,onSelectionDragStop:W,onMove:m,onMoveStart:v,onMoveEnd:y,noPanClassName:e1,nodeOrigin:eh,rfId:ty,autoPanOnConnect:tt,autoPanOnNodeDrag:tn,autoPanSpeed:to,onError:ti,connectionRadius:tl,isValidConnection:tr,selectNodesOnDrag:eu,nodeDragThreshold:td,onBeforeDelete:U,paneClickDistance:eV,debug:th}),(0,l.jsx)(R,{onSelectionChange:Z}),eF,(0,l.jsx)(N,{proOptions:e6,position:e5}),(0,l.jsx)(S,{rfId:ty,disableKeyboardA11y:te})]})})});let tA=e=>{var t;return null==(t=e.domNode)?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function tj(e){let{children:t}=e,n=p(tA);return n?(0,c.createPortal)(t,n):null}let tR=e=>{var t;return null==(t=e.domNode)?void 0:t.querySelector(".react-flow__viewport-portal")};function t_(e){let{children:t}=e,n=p(tR);return n?(0,c.createPortal)(t,n):null}function tD(){let e=h();return(0,r.useCallback)(t=>{let{domNode:n,updateNodeInternals:o}=e.getState(),l=Array.isArray(t)?t:[t],r=new Map;l.forEach(e=>{let t=null==n?void 0:n.querySelector('.react-flow__node[data-id="'.concat(e,'"]'));t&&r.set(e,{id:e,nodeElement:t,force:!0})}),requestAnimationFrame(()=>o(r,{triggerFitView:!1}))},[])}let tI=e=>e.nodes;function tz(){return p(tI,d.x)}let tO=e=>e.edges;function tB(){return p(tO,d.x)}let tL=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function tV(){return p(tL,d.x)}function tH(e){let[t,n]=(0,r.useState)(e),o=(0,r.useCallback)(e=>n(t=>X(e,t)),[]);return[t,n,o]}function tF(e){let[t,n]=(0,r.useState)(e),o=(0,r.useCallback)(e=>n(t=>X(e,t)),[]);return[t,n,o]}function tZ(e){let{onStart:t,onChange:n,onEnd:o}=e,l=h();(0,r.useEffect)(()=>{l.setState({onViewportChangeStart:t})},[t]),(0,r.useEffect)(()=>{l.setState({onViewportChange:n})},[n]),(0,r.useEffect)(()=>{l.setState({onViewportChangeEnd:o})},[o])}function tT(e){let{onChange:t}=e,n=h();(0,r.useEffect)(()=>{let e=[...n.getState().onSelectionChangeHandlers,t];return n.setState({onSelectionChangeHandlers:e}),()=>{let e=n.getState().onSelectionChangeHandlers.filter(e=>e!==t);n.setState({onSelectionChangeHandlers:e})}},[t])}let tX=e=>t=>{if(!e.includeHiddenNodes)return t.nodesInitialized;if(0===t.nodeLookup.size)return!1;for(let[,{internals:e}]of t.nodeLookup)if(void 0===e.handleBounds||!(0,a.QE)(e.userNode))return!1;return!0};function tW(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeHiddenNodes:!1};return p(tX(e))}function tK(e){let{type:t,id:n,nodeId:o,onConnect:l,onDisconnect:i}=e;console.warn("[DEPRECATED] `useHandleConnections` is deprecated. Instead use `useNodeConnections` https://reactflow.dev/api-reference/hooks/useNodeConnections");let s=eS(),d=null!=o?o:s,c=(0,r.useRef)(null),u=p(e=>e.connectionLookup.get("".concat(d,"-").concat(t).concat(n?"-".concat(n):"")),a.Y0);return(0,r.useEffect)(()=>{if(c.current&&c.current!==u){let e=null!=u?u:new Map;(0,a.ZZ)(c.current,e,i),(0,a.ZZ)(e,c.current,l)}c.current=null!=u?u:new Map},[u,l,i]),(0,r.useMemo)(()=>{var e;return Array.from(null!=(e=null==u?void 0:u.values())?e:[])},[u])}let tY=a.xc.error014();function tQ(){let{id:e,handleType:t,handleId:n,onConnect:o,onDisconnect:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=eS(),s=null!=e?e:i;if(!s)throw Error(tY);let d=(0,r.useRef)(null),c=p(e=>e.connectionLookup.get("".concat(s).concat(t?n?"-".concat(t,"-").concat(n):"-".concat(t):"")),a.Y0);return(0,r.useEffect)(()=>{if(d.current&&d.current!==c){let e=null!=c?c:new Map;(0,a.ZZ)(d.current,e,l),(0,a.ZZ)(e,d.current,o)}d.current=null!=c?c:new Map},[c,o,l]),(0,r.useMemo)(()=>{var e;return Array.from(null!=(e=null==c?void 0:c.values())?e:[])},[c])}function tU(e){return p((0,r.useCallback)(t=>{var n;let o=[],l=Array.isArray(e);for(let n of l?e:[e]){let e=t.nodeLookup.get(n);e&&o.push({id:e.id,type:e.type,data:e.data})}return l?o:null!=(n=o[0])?n:null},[e]),a.R5)}function tq(e){return p((0,r.useCallback)(t=>t.nodeLookup.get(e),[e]),d.x)}function tG(e){let{dimensions:t,lineWidth:n,variant:o,className:r}=e;return(0,l.jsx)("path",{strokeWidth:n,d:"M".concat(t[0]/2," 0 V").concat(t[1]," M0 ").concat(t[1]/2," H").concat(t[0]),className:(0,i.A)(["react-flow__background-pattern",o,r])})}function t$(e){let{radius:t,className:n}=e;return(0,l.jsx)("circle",{cx:t,cy:t,r:t,className:(0,i.A)(["react-flow__background-pattern","dots",n])})}!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(o||(o={}));let tJ={[o.Dots]:1,[o.Lines]:1,[o.Cross]:6},t0=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function t1(e){let{id:t,variant:n=o.Dots,gap:a=20,size:s,lineWidth:c=1,offset:u=0,color:g,bgColor:f,style:h,className:m,patternClassName:v}=e,y=(0,r.useRef)(null),{transform:x,patternId:w}=p(t0,d.x),b=s||tJ[n],S=n===o.Dots,C=n===o.Cross,E=Array.isArray(a)?a:[a,a],N=[E[0]*x[2]||1,E[1]*x[2]||1],k=b*x[2],M=Array.isArray(u)?u:[u,u],P=C?[k,k]:N,A=[M[0]*x[2]||1+P[0]/2,M[1]*x[2]||1+P[1]/2],j="".concat(w).concat(t||"");return(0,l.jsxs)("svg",{className:(0,i.A)(["react-flow__background",m]),style:{...h,...es,"--xy-background-color-props":f,"--xy-background-pattern-color-props":g},ref:y,"data-testid":"rf__background",children:[(0,l.jsx)("pattern",{id:j,x:x[0]%N[0],y:x[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(A[0],",-").concat(A[1],")"),children:S?(0,l.jsx)(t$,{radius:k/2,className:v}):(0,l.jsx)(tG,{dimensions:P,lineWidth:c,variant:n,className:v})}),(0,l.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(j,")")})]})}t1.displayName="Background";let t2=(0,r.memo)(t1);function t3(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,l.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function t4(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,l.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function t5(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,l.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function t6(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,l.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function t7(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,l.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function t8(e){let{children:t,className:n,...o}=e;return(0,l.jsx)("button",{type:"button",className:(0,i.A)(["react-flow__controls-button",n]),...o,children:t})}let t9=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function ne(e){let{style:t,showZoom:n=!0,showFitView:o=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:c,onFitView:u,onInteractiveChange:g,className:f,children:m,position:v="bottom-left",orientation:y="vertical","aria-label":x="React Flow controls"}=e,w=h(),{isInteractive:b,minZoomReached:S,maxZoomReached:C}=p(t9,d.x),{zoomIn:N,zoomOut:k,fitView:M}=er();return(0,l.jsxs)(E,{className:(0,i.A)(["react-flow__controls","horizontal"===y?"horizontal":"vertical",f]),position:v,style:t,"data-testid":"rf__controls","aria-label":x,children:[n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t8,{onClick:()=>{N(),null==s||s()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:C,children:(0,l.jsx)(t3,{})}),(0,l.jsx)(t8,{onClick:()=>{k(),null==c||c()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:S,children:(0,l.jsx)(t4,{})})]}),o&&(0,l.jsx)(t8,{className:"react-flow__controls-fitview",onClick:()=>{M(a),null==u||u()},title:"fit view","aria-label":"fit view",children:(0,l.jsx)(t5,{})}),r&&(0,l.jsx)(t8,{className:"react-flow__controls-interactive",onClick:()=>{w.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),null==g||g(!b)},title:"toggle interactivity","aria-label":"toggle interactivity",children:b?(0,l.jsx)(t7,{}):(0,l.jsx)(t6,{})}),m]})}ne.displayName="Controls";let nt=(0,r.memo)(ne),nn=(0,r.memo)(function(e){let{id:t,x:n,y:o,width:r,height:a,style:s,color:d,strokeColor:c,strokeWidth:u,className:g,borderRadius:f,shapeRendering:p,selected:h,onClick:m}=e,{background:v,backgroundColor:y}=s||{};return(0,l.jsx)("rect",{className:(0,i.A)(["react-flow__minimap-node",{selected:h},g]),x:n,y:o,rx:f,ry:f,width:r,height:a,style:{fill:d||v||y,stroke:c,strokeWidth:u},shapeRendering:p,onClick:m?e=>m(e,t):void 0})}),no=e=>e.nodes.map(e=>e.id),nl=e=>e instanceof Function?e:()=>e,nr=(0,r.memo)(function(e){let{id:t,nodeColorFunc:n,nodeStrokeColorFunc:o,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:c,NodeComponent:u,onClick:g}=e,{node:f,x:h,y:m,width:v,height:y}=p(e=>{let{internals:n}=e.nodeLookup.get(t),o=n.userNode,{x:l,y:r}=n.positionAbsolute,{width:i,height:s}=(0,a.uD)(o);return{node:o,x:l,y:r,width:i,height:s}},d.x);return f&&!f.hidden&&(0,a.QE)(f)?(0,l.jsx)(u,{x:h,y:m,width:v,height:y,style:f.style,selected:!!f.selected,className:r(f),color:n(f),borderRadius:i,strokeColor:o(f),strokeWidth:s,shapeRendering:c,onClick:g,id:f.id}):null});var ni=(0,r.memo)(function(e){let{nodeStrokeColor:t,nodeColor:n,nodeClassName:o="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:a=nn,onClick:s}=e,c=p(no,d.x),u=nl(n),g=nl(t),f=nl(o),h="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,l.jsx)(l.Fragment,{children:c.map(e=>(0,l.jsx)(nr,{id:e,nodeColorFunc:u,nodeStrokeColorFunc:g,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:h},e))})});let na=e=>!e.hidden,ns=e=>{let t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?(0,a.Mi)((0,a.aZ)(e.nodeLookup,{filter:na}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function nd(e){var t,n;let{style:o,className:s,nodeStrokeColor:c,nodeColor:u,nodeClassName:g="",nodeBorderRadius:f=5,nodeStrokeWidth:m,nodeComponent:v,bgColor:y,maskColor:x,maskStrokeColor:w,maskStrokeWidth:b,position:S="bottom-right",onClick:C,onNodeClick:N,pannable:k=!1,zoomable:M=!1,ariaLabel:P="React Flow mini map",inversePan:A,zoomStep:j=10,offsetScale:R=5}=e,_=h(),D=(0,r.useRef)(null),{boundingRect:I,viewBB:z,rfId:O,panZoom:B,translateExtent:L,flowWidth:V,flowHeight:H}=p(ns,d.x),F=null!=(t=null==o?void 0:o.width)?t:200,Z=null!=(n=null==o?void 0:o.height)?n:150,T=Math.max(I.width/F,I.height/Z),X=T*F,W=T*Z,K=R*T,Y=I.x-(X-I.width)/2-K,Q=I.y-(W-I.height)/2-K,U=X+2*K,q=W+2*K,G="".concat("react-flow__minimap-desc","-").concat(O),$=(0,r.useRef)(0),J=(0,r.useRef)();$.current=T,(0,r.useEffect)(()=>{if(D.current&&B)return J.current=(0,a.di)({domNode:D.current,panZoom:B,getTransform:()=>_.getState().transform,getViewScale:()=>$.current}),()=>{var e;null==(e=J.current)||e.destroy()}},[B]),(0,r.useEffect)(()=>{var e;null==(e=J.current)||e.update({translateExtent:L,width:V,height:H,inversePan:A,pannable:k,zoomStep:j,zoomable:M})},[k,M,A,j,L,V,H]);let ee=C?e=>{var t;let[n,o]=(null==(t=J.current)?void 0:t.pointer(e))||[0,0];C(e,{x:n,y:o})}:void 0,et=N?(0,r.useCallback)((e,t)=>{N(e,_.getState().nodeLookup.get(t).internals.userNode)},[]):void 0;return(0,l.jsx)(E,{position:S,style:{...o,"--xy-minimap-background-color-props":"string"==typeof y?y:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof x?x:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof w?w:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof b?b*T:void 0,"--xy-minimap-node-background-color-props":"string"==typeof u?u:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof c?c:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof m?m:void 0},className:(0,i.A)(["react-flow__minimap",s]),"data-testid":"rf__minimap",children:(0,l.jsxs)("svg",{width:F,height:Z,viewBox:"".concat(Y," ").concat(Q," ").concat(U," ").concat(q),className:"react-flow__minimap-svg",role:"img","aria-labelledby":G,ref:D,onClick:ee,children:[P&&(0,l.jsx)("title",{id:G,children:P}),(0,l.jsx)(ni,{onClick:et,nodeColor:u,nodeStrokeColor:c,nodeBorderRadius:f,nodeClassName:g,nodeStrokeWidth:m,nodeComponent:v}),(0,l.jsx)("path",{className:"react-flow__minimap-mask",d:"M".concat(Y-K,",").concat(Q-K,"h").concat(U+2*K,"v").concat(q+2*K,"h").concat(-U-2*K,"z\n        M").concat(z.x,",").concat(z.y,"h").concat(z.width,"v").concat(z.height,"h").concat(-z.width,"z"),fillRule:"evenodd",pointerEvents:"none"})]})})}nd.displayName="MiniMap";let nc=(0,r.memo)(nd),nu=(0,r.memo)(function(e){let{nodeId:t,position:n,variant:o=a.xN.Handle,className:s,style:d={},children:c,color:u,minWidth:g=10,minHeight:f=10,maxWidth:p=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:v=!1,resizeDirection:y,shouldResize:x,onResizeStart:w,onResize:b,onResizeEnd:S}=e,C=eS(),E="string"==typeof t?t:C,N=h(),k=(0,r.useRef)(null),M=o===a.xN.Line?"right":"bottom-right",P=null!=n?n:M,A=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(k.current&&E)return A.current||(A.current=(0,a.ET)({domNode:k.current,nodeId:E,getStoreItems:()=>{let{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:l,domNode:r}=N.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:l,paneDomNode:r}},onChange:(e,t)=>{let{triggerNodeChanges:n,nodeLookup:o,parentLookup:l,nodeOrigin:r}=N.getState(),i=[],s={x:e.x,y:e.y},d=o.get(E);if(d&&d.expandParent&&d.parentId){var c,u,g,f,p,h,m;let t=null!=(c=d.origin)?c:r,n=null!=(g=null!=(u=e.width)?u:d.measured.width)?g:0,v=null!=(p=null!=(f=e.height)?f:d.measured.height)?p:0,y={id:d.id,parentId:d.parentId,rect:{width:n,height:v,...(0,a.us)({x:null!=(h=e.x)?h:d.position.x,y:null!=(m=e.y)?m:d.position.y},{width:n,height:v},d.parentId,o,t)}},x=(0,a.r8)([y],o,l,r);i.push(...x),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*v,e.y):void 0}if(void 0!==s.x&&void 0!==s.y){let e={id:E,type:"position",position:{...s}};i.push(e)}if(void 0!==e.width&&void 0!==e.height){let t={id:E,type:"dimensions",resizing:!0,setAttributes:!y||("horizontal"===y?"width":"height"),dimensions:{width:e.width,height:e.height}};i.push(t)}for(let e of t){let t={...e,type:"position"};i.push(t)}n(i)},onEnd:e=>{let{width:t,height:n}=e;N.getState().triggerNodeChanges([{id:E,type:"dimensions",resizing:!1,dimensions:{width:t,height:n}}])}})),A.current.update({controlPosition:P,boundaries:{minWidth:g,minHeight:f,maxWidth:p,maxHeight:m},keepAspectRatio:v,resizeDirection:y,onResizeStart:w,onResize:b,onResizeEnd:S,shouldResize:x}),()=>{var e;null==(e=A.current)||e.destroy()}},[P,g,f,p,m,v,w,b,S,x]);let j=P.split("-"),R=o===a.xN.Line?"borderColor":"backgroundColor",_=u?{...d,[R]:u}:d;return(0,l.jsx)("div",{className:(0,i.A)(["react-flow__resize-control","nodrag",...j,o,s]),ref:k,style:_,children:c})});function ng(e){let{nodeId:t,isVisible:n=!0,handleClassName:o,handleStyle:r,lineClassName:i,lineStyle:s,color:d,minWidth:c=10,minHeight:u=10,maxWidth:g=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,shouldResize:h,onResizeStart:m,onResize:v,onResizeEnd:y}=e;return n?(0,l.jsxs)(l.Fragment,{children:[a.V8.map(e=>(0,l.jsx)(nu,{className:i,style:s,nodeId:t,position:e,variant:a.xN.Line,color:d,minWidth:c,minHeight:u,maxWidth:g,maxHeight:f,onResizeStart:m,keepAspectRatio:p,shouldResize:h,onResize:v,onResizeEnd:y},e)),a.zh.map(e=>(0,l.jsx)(nu,{className:o,style:r,nodeId:t,position:e,color:d,minWidth:c,minHeight:u,maxWidth:g,maxHeight:f,onResizeStart:m,keepAspectRatio:p,shouldResize:h,onResize:v,onResizeEnd:y},e))]}):null}let nf=e=>{var t;return null==(t=e.domNode)?void 0:t.querySelector(".react-flow__renderer")};function np(e){let{children:t}=e,n=p(nf);return n?(0,c.createPortal)(t,n):null}let nh=(e,t)=>(null==e?void 0:e.internals.positionAbsolute.x)!==(null==t?void 0:t.internals.positionAbsolute.x)||(null==e?void 0:e.internals.positionAbsolute.y)!==(null==t?void 0:t.internals.positionAbsolute.y)||(null==e?void 0:e.measured.width)!==(null==t?void 0:t.measured.width)||(null==e?void 0:e.measured.height)!==(null==t?void 0:t.measured.height)||(null==e?void 0:e.selected)!==(null==t?void 0:t.selected)||(null==e?void 0:e.internals.z)!==(null==t?void 0:t.internals.z),nm=(e,t)=>{if(e.size!==t.size)return!1;for(let[n,o]of e)if(nh(o,t.get(n)))return!1;return!0},nv=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2],selectedNodesCount:e.nodes.filter(e=>e.selected).length});function ny(e){var t;let{nodeId:n,children:o,className:s,style:c,isVisible:u,position:g=a.yX.Top,offset:f=10,align:h="center",...m}=e,v=eS(),y=p((0,r.useCallback)(e=>(Array.isArray(n)?n:[n||v||""]).reduce((t,n)=>{let o=e.nodeLookup.get(n);return o&&t.set(o.id,o),t},new Map),[n,v]),nm),{x,y:w,zoom:b,selectedNodesCount:S}=p(nv,d.x);if(!("boolean"==typeof u?u:1===y.size&&(null==(t=y.values().next().value)?void 0:t.selected)&&1===S)||!y.size)return null;let C=(0,a.aZ)(y),E=Array.from(y.values()),N=Math.max(...E.map(e=>e.internals.z+1)),k={position:"absolute",transform:(0,a.ih)(C,{x,y:w,zoom:b},g,f,h),zIndex:N,...c};return(0,l.jsx)(np,{children:(0,l.jsx)("div",{style:k,className:(0,i.A)(["react-flow__node-toolbar",s]),...m,"data-id":E.reduce((e,t)=>"".concat(e).concat(t.id," "),"").trim(),children:o})})}}}]);